ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(0,0)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(0,0.1)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.1,0.1)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.1,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.3,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.2,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.1,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(-0.1,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(0,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(0,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_x_continuous(expand = c(0,0.5)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
scale_y_continuous(expand = c(0,0)) +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "A", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = 1, option = "A", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "A", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "B", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "C", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "D", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
library(here)
library(tidyverse)
library(viridisLite)
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 <- plot_data  %>%
mutate(total_change = final_year_2021 - first_year_2010) %>%
arrange(total_change)
ID_rank_data <- presc_data[, c("health_board", "area_code")]
colnames(rank_data_NEW)[colnames(rank_data_NEW) %in% c("measure", "comparator_value")] <- c("final_year_2021", "first_year_2010")
rank_data <- read_csv(here("Inputs/rank_data.csv"))
library(here)
library(tidyverse)
library(viridisLite)
rank_data <- read_csv(here("Inputs/rank_data.csv"))
rank_data_NEW = rank_data[, -c(1, 4, 5, 6, 9, 10, 12, 13, 14)]
glimpse(rank_data_NEW)
colnames(rank_data_NEW)[colnames(rank_data_NEW) %in% c("measure", "comparator_value")] <- c("final_year_2021", "first_year_2010")
presc_data <- rank_data_NEW %>%
mutate(area_name = gsub ("NHS", "", area_name)) %>%
rename(health_board = area_name)
ID_rank_data <- presc_data[, c("health_board", "area_code")]
write_csv(ID_rank_data, "ID_rank_data.csv")
#remove area_code column
plot_data <- presc_data [, -c(2)]
write_csv(plot_data, "plot_data.csv")
ggplot(plot_data, aes(x=first_year_2010, y=health_board)) +
#include point appearance
geom_point(size = 3, color = "red", shape = 21, fill = "orange", stroke = 1) +
#include segment appearance
geom_segment(aes(x=first_year_2010, xend=final_year_2021, y=health_board, yend=health_board) , size = 0.5, color = "black", linetype = "dotdash") +
#include plot theme
theme_light() +
theme(panel.border = element_blank() , panel.grid.minor.x = element_line() ) +
#include title and labels
ggtitle("Anxiety & Depression prescriptions for 2010 - 2021") +
xlab("Percentage") +
ylab("")
plot_data2 <- plot_data  %>%
mutate(total_change = final_year_2021 - first_year_2010) %>%
arrange(total_change)
write_csv(plot_data2, "plot_data2.csv")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.4, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,15), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
summary(plot_data2)
Scotland_data <- plot_data2 %>%
select(final_year_2021, first_year_2010)
View(Scotland_data)
?pivot_longer
View(rank_data)
View(plot_data2)
View(plot_data)
Scotland_data <- pivot_longer(plot_data, 3:4, names_to = "years", values_to = "Percentage") %>%
Scotland_data <- pivot_longer(plot_data, 3:4, names_to = "years", values_to = "Percentage")
View(Scotland_data)
View(rank_data_NEW)
View(plot_data)
View(plot_data2)
View(presc_data)
View(rank_data)
View(rank_data_NEW)
plot_data %>%
rename("2021" = final_year_2021)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
View(plot_data)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
pivot_longer(plot_data, 3:4)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
view(plot_data)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
view("plot_data")
View(plot_data)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
view("plot_data")
View(Scotland_data)
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
Scot_pop <- plot_data
plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
write_csv(Scot_pop, "Scot_pop.csv")
rename(health_board = area_name)
here
library(here)
set(wd)
get(wd)
getwd
setwd
setwd(C:\Users\irina\Desktop\current work search\UoA Data Science 2023\GitHub\Population_Prescribed_Drug)
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
write_csv(Scot_pop, "Scot_pop.csv")
View(Scot_pop)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%")
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%") %>%
boxplot("%" ~ "years")
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%") %>%
ggplot(Scot_pop, aes(x = "years", y = "%")) +
geom_boxplot(fill = "slateblue", aplha = 0.2)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%") %>%
ggplot(aes(x = "years", y = "%")) +
geom_boxplot(fill = "slateblue", aplha = 0.2)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%") %>%
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
write_csv(Scot_pop, "Scot_pop.csv") %>%
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
write_csv(Scot_pop, "Scot_pop.csv")
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%")
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%")
write_csv(Scot_pop, "Scot_pop.csv")
View(Scot_pop)
View(Scotland_data)
library(here)
library(tidyverse)
library(viridisLite)
#read the data
rank_data <- read_csv(here("Inputs/rank_data.csv"))
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
library(here)
library(tidyverse)
library(viridisLite)
#read the data
rank_data <- read_csv(here("Inputs/rank_data.csv"))
rank_data_NEW = rank_data[, -c(1, 4, 5, 6, 9, 10, 12, 13, 14)]
glimpse(rank_data_NEW)
colnames(rank_data_NEW)[colnames(rank_data_NEW) %in% c("measure", "comparator_value")] <- c("final_year_2021", "first_year_2010")
presc_data <- rank_data_NEW %>%
mutate(area_name = gsub ("NHS", "", area_name)) %>%
rename(health_board = area_name)
ID_rank_data <- presc_data[, c("health_board", "area_code")]
write_csv(ID_rank_data, "ID_rank_data.csv")
#remove area_code column
plot_data <- presc_data [, -c(2)]
write_csv(plot_data, "plot_data.csv")
ggplot(plot_data, aes(x=first_year_2010, y=health_board)) +
#include point appearance
geom_point(size = 3, color = "red", shape = 21, fill = "orange", stroke = 1) +
#include segment appearance
geom_segment(aes(x=first_year_2010, xend=final_year_2021, y=health_board, yend=health_board) , size = 0.5, color = "black", linetype = "dotdash") +
#include plot theme
theme_light() +
theme(panel.border = element_blank() , panel.grid.minor.x = element_line() ) +
#include title and labels
ggtitle("Anxiety & Depression prescriptions for 2010 - 2021") +
xlab("Percentage") +
ylab("")
plot_data2 <- plot_data  %>%
mutate(total_change = final_year_2021 - first_year_2010) %>%
arrange(total_change)
write_csv(plot_data2, "plot_data2.csv")
plot_data2 %>%
arrange(desc(total_change)) %>%
mutate(health_board = factor(health_board, health_board)) %>%
ggplot(aes(x=total_change, y=health_board, size = total_change, fill= total_change)) +
geom_point(alpha=0.3, color ="black", shape = 21) +
scale_size(range = c(.1,17), name = "Percentage (%)") +
scale_fill_viridis_c(alpha = 0.5, begin = 0, end = 1, direction = -1, option = "H", values = NULL, space = "Lab", guide = "colourbar", aesthetics = "fill") +
xlab("") +
ylab("") +
theme(legend.position = "none") +
ggtitle("Population % increase in drug prescription over 10 years")
summary(plot_data2)
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%")
write_csv(Scot_pop, "Scot_pop.csv")
View(Scot_pop)
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010) %>%
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%")
Scot_pop <- plot_data %>%
rename("2021" = final_year_2021) %>%
rename("2010" = first_year_2010)
pivot_longer(Scot_pop, 3:4, names_to = "years", values_to = "%") %>%
write_csv(Scot_pop, "Scot_pop.csv")
